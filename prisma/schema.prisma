generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}


model User {
  id          Int       @id @default(autoincrement())
  email       String    @unique
  password    String
  Profile     Profile?
}

model Profile {
  id          Int       @id @default(autoincrement())
  userId      Int       @unique
  name        String
  profilePic  String?
  shortBio    String
  about       String
  followedBy  Profile[]  @relation("UserFollows")
  following   Profile[]  @relation("UserFollows")
  createdOn   DateTime   @default(now())
  blogs       Blog[]
  bookmarks   Bookmark[]
  user        User       @relation(fields: [userId], references: [id])
}

model Blog{
  id          Int        @id @default(autoincrement())
  headline    String
  shortDesc   String?
  content     String
  publishedOn DateTime   @default(now())
  authorId    Int
  published   Boolean    @default(false)
  author      Profile    @relation(fields: [authorId], references: [id])
  bookmarks   Bookmark[]
}


model Bookmark {
  id         Int      @id @default(autoincrement())
  userId     Int
  blogId     Int
  createdAt  DateTime @default(now())
  user       Profile     @relation(fields: [userId], references: [id])
  blog       Blog     @relation(fields: [blogId], references: [id])
  @@unique([userId, blogId])
}